<!DOCTYPE html>
<html lang="en">
    <head>
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta http-equiv="content-type" content="text/html; charset=utf-8">

      <!-- Enable responsiveness on mobile devices-->
      <!-- viewport-fit=cover is to support iPhone X rounded corners and notch in landscape-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, viewport-fit=cover">

      <title>thePacketGeek</title>

      <!-- CSS -->
      <link rel="stylesheet" href="https://thepacketgeek.com/print.css" media="print">
      <link rel="stylesheet" href="https://thepacketgeek.com/poole.css">
      <link rel="stylesheet" href="https://thepacketgeek.com/hyde.css">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

      
        <link rel="alternate" type="application/atom+xml" title="RSS" href="https://thepacketgeek.com/atom.xml">
      

      
<link rel="shortcut icon" type="image/jpg" href="https://thepacketgeek.com/favicon.ico"/>

<script>
(function (i, s, o, g, r, a, m) {
i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
    (i[r].q = i[r].q || []).push(arguments)
}, i[r].l = 1 * new Date(); a = s.createElement(o),
    m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
})(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

ga('create', "UA-44238008-1", 'auto');
ga('send', 'pageview');
</script>



<script async src="https://www.googletagmanager.com/gtag/js?id=G-0JCBHFFH3Q"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-0JCBHFFH3Q');
</script>

<link rel="stylesheet" href="https://thepacketgeek.com/css/fontawesome.min.css">
<link rel="stylesheet" href="https://thepacketgeek.com/css/brands.min.css">
<link rel="stylesheet" href="https://thepacketgeek.com/site.css">
<script type="text/javascript" src="https://thepacketgeek.com/elasticlunr.min.js"></script>
<script type="text/javascript" src="https://thepacketgeek.com/search_index.en.js"></script>
<script type="text/javascript" src="https://thepacketgeek.com/js/search.js"></script>

    </head>

    <body class="theme-base-0d ">
        
            <div class="sidebar">
                <div class="container sidebar-sticky">
                    <div class="sidebar-about">
                        
    <div class="title-box">
        <a href="https:&#x2F;&#x2F;thepacketgeek.com"><h2>thePacketGeek</h2></a>
    </div>
    
    <p class="lead">a developing networker</p>
    
    
        <a class="pad-right-6" href="https:&#x2F;&#x2F;github.com&#x2F;thepacketgeek">
            
            <i class="fab fa-github"></i>
            
        </a>
    
        <a class="pad-right-6" href="https:&#x2F;&#x2F;twitter.com&#x2F;thepacketgeek">
            
            <i class="fab fa-twitter"></i>
            
        </a>
    

                    </div>

                    <ul class="sidebar-nav">
                        
<hr class="lead" />
<li class="pad-bottom-12"> Categories </li>
<li class="sidebar-nav-item">
    <a href="/rust/">Rust</a>
</li>
<li class="sidebar-nav-item">
    <a href="/exabgp/">Exabgp</a>
</li>
<li class="sidebar-nav-item">
    <a href="/scapy/">Scapy</a>
</li>
<li class="sidebar-nav-item">
    <a href="/pyshark/">PyShark</a>
</li>
<hr class="lead" />
<div class="search-container">
    <input id="search" type="search" placeholder="ðŸ”Ž Search">

    <div class="search-results">
        <div class="search-results__items"></div>
    </div>
</div>

                    </ul>
                    
                    <ul class="sidebar-footer">
                        

                    </ul>
                </div>
            </div>
        

        <div class="content container">
            
<div class="section">
  <h1 class="section-title">Using Rust&#x27;s TcpStream</h1>
  <hr class="lead" />
  
    <h2 class="title inline"><a href="https:&#x2F;&#x2F;thepacketgeek.com&#x2F;rust&#x2F;tcpstream&#x2F;reading-and-writing&#x2F;">Reading and Writing Data</a></h2>
    <h4 class="subtitle inline">with Rust&#x27;s TcpStream</h4>
    <div class="post-details post-indent">
      Jun - 2020
      <em>(~7 minutes read time)</em>
    </div>
    <div class="post-indent"><p>For the start of our journey with <a href="https://doc.rust-lang.org/stable/std/net/struct.TcpStream.html">TcpStream</a> we'll take a look at what it takes to send and receive raw bytes.</p>
<p>This demo is going to build up some concepts that result in a <a href="https://github.com/thepacketgeek/rust-tcpstream-demo/tree/master/raw">demo found here</a>. The working concept is that we want to have a client send some data (a <code>String</code>) to a server that will echo the message back to the client. In further demos, we'll progress this concept to do slightly more interesting things with the data on the server before sending back.</p>
</div>
    <hr class="lead" />
  
    <h2 class="title inline"><a href="https:&#x2F;&#x2F;thepacketgeek.com&#x2F;rust&#x2F;tcpstream&#x2F;lines-codec&#x2F;">Building a LinesCodec</a></h2>
    <h4 class="subtitle inline">for Rust&#x27;s TcpStream</h4>
    <div class="post-details post-indent">
      Jun - 2020
      <em>(~5 minutes read time)</em>
    </div>
    <div class="post-indent"><p>In the <a href="../reading-and-writing">previous post</a> we learned how to read &amp; write bytes with <code>TcpStream</code>, but the calling code had to be aware of that and do the serialization/deserialization.  In this demo, we'll continue using <code>BufRead</code> and <code>BufReader</code> to build:</p>
<ul>
<li>A <code>LinesCodec</code> that abstracts away <code>String</code> serialization/deserialization &amp; TcpStream I/O</li>
<li>A client that uses the <code>LinesCodec</code> to send and print returned <code>String</code>s</li>
<li>A server that also uses the <code>LinesCodec</code> and reverses <code>String</code>s before echoing them back</li>
</ul>
</div>
    <hr class="lead" />
  
    <h2 class="title inline"><a href="https:&#x2F;&#x2F;thepacketgeek.com&#x2F;rust&#x2F;tcpstream&#x2F;create-a-protocol&#x2F;">Create a Custom Protocol</a></h2>
    <h4 class="subtitle inline">for Rust&#x27;s TcpStream</h4>
    <div class="post-details post-indent">
      Jun - 2020
      <em>(~8 minutes read time)</em>
    </div>
    <div class="post-indent"><p>In this series so far we've learned how to <a href="../reading-and-writing">read &amp; write bytes</a> with <code>TcpStream</code> and then how to <a href="../lines-codec">abstract over that with a <code>LinesCodec</code></a> for sending and receiving <code>String</code> messages. In this post we'll look into what it takes to build a custom protocol for message passing more than a single type of thing (like a <code>String</code>).</p>
<h2 id="defining-our-message-structs">Defining our Message Structs</h2>
<p>To give our client and server more options for communicating we'll create:</p>
<ul>
<li>A <code>Request</code> message that allow the client to request <em>either</em>:
<ul>
<li>Echo a string</li>
<li>Jumble a string with a specified amount of jumbling entropy</li>
</ul>
</li>
<li>A <code>Response</code> message for the server to respond with the successfully echo/jumbled <code>String</code></li>
</ul>
</div>
    <hr class="lead" />
  
</div>

        </div>

    </body>

</html>
